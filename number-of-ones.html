<!DOCTYPE html>
<html class="box-border text-[100.575%]" lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap"
			rel="stylesheet"
		/>
    <link rel="stylesheet" href="css/numbers.css">
    <title>Number of Ones</title>
</head>
<body class="h-[200vh] relative text-bodytext font-mono text-[0.87rem] bg-editor">
     
    <div class="z-1 pt-6 space-x-2 flex justify-between pl-[0] pr-[0.8rem] ml-[1.85rem]">
       <div class="absolute left-[-2px]">
         <ol class="text-number text-right p-0 m-0">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
    <!-- 45 --> <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="invisible normal:invisible"></li>
                <li class="invisible normal:invisible"></li>
                <li class="invisible normal:invisible"></li><!-- 50 -->
                <li class="invisible normal:visible"></li>
                <li class="invisible normal:visible"></li>
                <li class="invisible normal:visible"></li>
                <li class=" normal:visible"></li>
                <li></li>
                <li></li>
                <li></li>
     <!-- 58 --><li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="invisible normal:invisible"></li>
                <li class="invisible normal:invisible"></li>
                <li class="invisible normal:invisible"></li><!--63-->
                <li class="invisible normal:visible"></li>
                <li class="invisible normal:visible"></li>
                <li class="invisible normal:visible"></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
       <!--78--><li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="invisible normal:invisible"></li>
                <li class="invisible normal:invisible"></li>
                <li class="invisible normal:invisible"></li><!--83-->
                <li class="invisible normal:visible"></li>
                <li class="invisible normal:visible"></li>
                <li class="invisible normal:visible"></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li class="normal:invisible"></li>
    <!--101-->  <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="invisible normal:invisible"></li>
                <li class="invisible normal:visible"></li><!--106-->
                <li class="invisible normal:visible"></li>
                <li class="invisible normal:visible"></li>
                <li class="invisible normal:visible"></li>
                <li class="invisible normal:visible"></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
      <!--129--><li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="invisible normal:invisible"></li>
                <li class="invisible normal:visible"></li><!--137-->
                <li class="invisible normal:visible"></li>
                <li class="invisible normal:visible"></li>
                <li class="invisible normal:visible"></li>
                <li class="invisible normal:visible"></li>
                <li class="invisible normal:visible"></li>
                <li class="invisible normal:visible"></li>
                <li class="invisible normal:visible"></li>
                <li class="invisible normal:visible"></li>
                <li class="normal:visible"></li>
                <li></li>
                <li></li>
<!--149-->      <li  class="normal:invisible"></li>
                <li  class="normal:invisible"></li>
                <li  class="normal:invisible"></li>
                <li  class="normal:invisible"></li>
                <li  class="normal:invisible"></li>
                <li  class="normal:invisible"></li>
                <li  class="normal:invisible"></li><!--155-->
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
  <!--173-->    <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li><!--180-->
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
     <!--186--> <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li><!--193-->
                <li></li>
                <li class="normal:invisible"></li> <!--195-->
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li>
                <li class="normal:invisible"></li><!--200-->
                <li></li>
                <li></li>
                <li></li>
       <!--204--><li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li><!--212-->
                <li></li>
  <!--214-->    <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li><!--223-->
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
    <!--229-->  <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li><!--237-->
                <li></li>
                <li></li>
                <li></li>
<!--241-->      <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li><!--246-->
                <li></li>
                <li></li>
                <li></li>
                <li></li>
    <!--251-->  <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li><!--256-->
                <li></li>
                <li></li>
   <!--259-->   <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li><!--267-->
                <li></li>
                <li></li>
  <!--270-->    <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li><!--294-->
                <li></li>
                <li></li>
                <li></li>
     <!--298--> <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li><!--321-->
                <li></li>
    <!--323-->  <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li><!--331-->
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
            </ol>
     </div>
        <div class="">
            <div class="leading-[22px] mb-6">
                <h2 class="text-[1.06rem] text-bodytext font-bold" >Number of Ones</h2>
                <p class=" font-bold text-othertext leading-[22px]">Calculating digits in a series of numbers.
                </p>
                <date class=" text-othertext text-[11.4px] leading-[24px]">06 Aug 2022</date>
            </div>
            <div class="flex flex-col justify-between normal:mb-[1.488rem] mb-[1.4rem]">
                <img src="images/number-of-ones-cover-640x.png" class="object-center normal:object-left normal:w-[95%] w-auto mb-[1.25rem]" alt="number of ones picture">
                <div class="">
                    <p class="leading-[22px] pr-[0.9rem]">In this post, I'll explain my solution to the programming puzzle from <a class="text-accent underline" href="#">the latest issue</a>
                    </a> of <a class="text-accent underline" href="">@cassidoo</a>'s newsletter.</p>
                </div>
            </div>
            <div class="w-full">
                <p class="">The task is simple</p><br>
                <code class="leading-[22px] font-medium text-code3">
                    &gt;&nbsp; Given an integer n, count the <br>
                    &gt;&nbsp; total number of 1 digits <br>
                    &gt;&nbsp; appearing in  all <br> 
                    &gt;&nbsp; non-negative integers less<br>
                    &gt;&nbsp; than or equal to n. <br>
                </code>
                <p class="leading-[22px] mt-[1.44rem] mb-10">
                    Perhaps the most obvious solution is to just loop over the numbers, convert them to strings, and count the digits. But the larger the input number, the slower it gets. So, rather than counting, we can <em>calculate</em> the result.
                </p>
                    <h2 class="text-bodytext text-lg font-black mb-[1.27rem]">Idea</h2>  
                    <p class="leading-[22px]">Let's start with the number of times that the digit 1 appears in the 0-9 range. It's just one. The number 1.</p>
                    <br>
                    <p class="leading-[22px]">Now, let's try 0-99. Here we have the same thing, with the difference being that it's repeated 10 times:</p>
                </div> 
                 
                <div class="mt-[7.9rem]">
                    <p class="leading-[22px] ">So, the units (rightmost digit) contributes to the sum with a total of 10 occurrences.</p>
                    <br>
                    <p class="leading-[22px] mb-[7.88rem]">However, the range 10-19 is special, because each number there always begins with 1:</p>
                    <p class="leading-[22px] mb-[1.37rem]">In total, the digit 1 appears 20 times in the numbers up to 99:</p>
                    <div class="leading-[22px] mb-[1.43rem]">
                        <ul>
                            <li>10 times as a digit in the units column</li>
                            <li>10 times as a digit in the tens column</li>
                        </ul>
                    </div>
                    <div class="w-full mb-[1.4rem]">
                        <span class="hidden normal:block text-dashed dashed">//&nbsp;</span>
                    </div>
                    <div class="w-full normal:hidden mb-[1.4rem]">
                        <span class="block text-dashed dashed1">//&nbsp;</span>
                    </div>
                    <p class="leading-[22px] mb-[7.8rem]">If we look at the numbers 0-999, we'll start to see patterns. Now, 1 appears in the units column not 10, but 100 times:</p>
                </div>
                <p class="leading-[21.9px]">Notice how we can just take the last digit off the number and get the number of times 1 will appear at the units position. For example, if we have 236, we can take the 6 out and know that 1 will surely appear 23 times as a units digit. In this case, however, we must add one, because 231 is also part of the collection. If the end number was 230, we wouldn't have that.</p><br>
                <p class="leading-[22px]">Now, we can do the same, but for the tens. If we remove the 36 from 236, we get 2. So we know that the digit 1 will cycle 2 times in the tens column:</p>
                <br><br><br><br><br><br>
                <p class="leading-[22px] pt-[0.2rem] normal:leading-[21.6px] normal:pt-[0.35rem]">But since the tens digit is 3, which is bigger than 1, we get one extra cycle, namely 210-219. If we had 206, 0 is less than 1, so we wouldn't get that extra cycle.</p><br>
                <p class="leading-[22px]">The special case is when the digit is 1. If we have 216, then we get an incomplete extra cycle of only 7 repetitions, rather than 10. We go through 210-216, not 210-219. So the occurrences of 1 in the tens column depends on columns to the right. This time, we have to remove digits from the left side. For the number 216, we remove 21 from it and get 6. We then have to add 1, because even though 210 has 0 in the units, it still counts. We end up with 7, which is the number of ones in the incomplete cycle. Here's the entire calculation:</p><br><br><br><br><br><br><br><br><br><br>
                <p class="leading-[22px] normal:pt-[0.2rem">Notice how we have a multiplier for each digit, and it increases exponentially: 1 for units, 10 for tens, 100 for hundreds.</p>
                <h2 class="text-bodytext text-[1.2rem] font-bold mb-[1.1rem]">Implementation</h2>
                <p class="leading-[22px] mb-[]">Let's start with the multiplier. In code, we can loop over the digits in reverse to get it:</p>
                <p class="leading-[22px] mb-[1.4rem]">Now, we have to be able to take digits out of the number. In our first iteration, for the units, we have to take 23 out of <span class="text-orange-400">236</span>. We can do that by dividing the number by 10, getting <span class="text-orange-400">23.6</span>. We can then round it down with <span class="text-orange-400">Math.floor()</span> to get <span class="text-orange-400">23</span>.</p>
                <p class="leading-[22px] mb-[1.4rem]">For the tens, we have to get 2 out of <span class="text-orange-400">236</span>. We can do that by dividing by 100, getting <span class="text-orange-400">2.36</span>, and rounding down to <span class="text-orange-400">2</span>.</p>
                <p class="leading-[22px] mb-[]">Basically, we multiply our multiplier by 10, divide, then floor, and we have successfully taken out the necessary digits:</p>
                <p class="leading-[22px] mb-[]">All that's left now is to apply the multiplier to those numbers and we get the number of complete cycles with a 1 that each digit goes through:</p>
                <p class="leading-[22px] mb-[]">Now, we have to handle cases where the digit is greater than 1. That's when we have one extra cycle:</p>
            </div>

        </div>  
        <!-- absolutely positioned elements -->
        <div class="pos1 w-full bg-code2 absolute normal:top-[62.8rem] top-[66.5rem]  flex pl-7">
            <div class="list py-6 mr-2">
                <ol class="relative text-sm z-10 p-0 pr-2">
                    <li></li>
                    <li></li>
                </ol>
            </div>
            <div class="py-6 side-scroll overflow-x-auto whitespace-nowrap">
                <code class=""><div>1, 11, 21, 31, 41, 51, 61, 71, 81, 91</div>
            <div class="flex justify-between">↑ &nbsp; ↑ &nbsp; ↑ &nbsp; ↑ &nbsp; ↑ &nbsp; ↑ &nbsp;&nbsp;↑ &nbsp; ↑ &nbsp; ↑ &nbsp; ↑ (10)</div></code>
            </div>
        </div>   

        <div class="w-full bg-code2 absolute z-10 normal:top-[80.2rem] top-[84.2rem] left-[-0.5rem] flex pl-7">
            <div class="list py-6 mr-2">
                <ol class="relative text-sm z-10 p-0 pr-2">
                    <li></li>
                    <li></li>
                </ol>
            </div>
            <div class="py-6 side-scroll overflow-x-auto whitespace-nowrap">
                <code class=""><div>10, 11, 12, 13, 14, 15, 16, 17, 18, 19</div>
            <div class="flex justify-between">↑ &nbsp; ↑ &nbsp; ↑ &nbsp; ↑ &nbsp; ↑ &nbsp; ↑ &nbsp;&nbsp;↑ &nbsp; ↑ &nbsp; ↑ &nbsp; ↑ (10)</div></code>
            </div>
        </div>     

        <div class="w-full bg-code2 absolute z-10 normal:top-[107rem] top-[111.3rem] left-[-0.75rem] flex pl-7">
            <div class="list py-6 mr-2">
                <ol class="relative text-sm z-10 p-0 pr-2">
                    <li></li>
                    <li></li>
                </ol>
            </div>
            <div class="py-6 side-scroll overflow-x-auto whitespace-nowrap">
                <code class=""><div>1, 11, 21... 131, 141, 151... 321, 641, 961... 991</div>
                <div class="flex justify-between">↑ &nbsp; ↑ &nbsp; ↑ &nbsp; &nbsp; &nbsp;↑ &nbsp;  &nbsp;↑ &nbsp; &nbsp;↑ &nbsp; &nbsp; &nbsp;↑ &nbsp; &nbsp;↑&nbsp; &nbsp; ↑ &nbsp; &nbsp; &nbsp;↑ (100)</div></code>
            </div>
        </div>     
        <div class="w-full bg-code2 absolute z-10 normal:top-[137rem] top-[143.6rem] left-[-0.75rem] flex pl-[1.8rem]">
            <div class="list noborder py-6 mr-2">
                <ol class="relative text-sm z-10 p-0 pr-2">
                    <li></li>
                    <li></li>
                </ol>
            </div>
            <div class="py-6 side-scroll overflow-x-auto whitespace-nowrap">
                <code class=""><div>10-19, 110-119</div>
            <div class="flex justify-between"> &nbsp;↑ &nbsp;↑ &nbsp;&nbsp; ↑ &nbsp; ↑</div></code>
            </div>
        </div>    
        <div class="w-full bg-code2 absolute z-10 normal:top-[174rem] top-[186rem] left-[-0.75rem] flex pl-[1.8rem]">
            <div class="list py-6 mr-2">
                <ol class="relative text-sm z-10 p-0 pr-2">
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                </ol>
            </div>
            <div class="py-6 side-scroll overflow-x-auto whitespace-nowrap">
                <code class="leading-[22.5px]">236 <br>
            <div>││└  23*1 +   1*1 extra (because 6 &gt; 1) =  24</div>
            <div>│└─  2*10 +  1*10 extra (because 3 &gt; 1) =  30</div>
            <div>└── 0*100 + 1*100 extra (because 2 &gt; 1) = 100</div>
                                        <div class="text-right">total = 154</div></code>
               
            </div>
        </div>    
        <!-- <div class="w-full bg-code2 absolute z-10 top-[42.85%] left-[-0.75rem] flex pl-[1.8rem]">
            <div class="list noborder py-6 mr-2">
                <ol class="relative text-sm z-10 p-0 pr-2">
                    <li></li>
                    <li></li>
                    <li></li>
                </ol>
            </div>
            <div class="py-6 side-scroll overflow-x-auto whitespace-nowrap">
                <code class=""><div><span> [</span><span class="text-purple-500">6</span><span class="">,</span> <span class="text-purple-500">3</span><span class="">,</span> <span class="text-purple-500">2</span><span class="">]</span><span class="">.</span><span class="text-blue-300">forEach</span><span class="">(</span><span class="">(</span><span class="">digit<span class="">,</span> i</span><span class="">)</span> <span class="text-pink-500">=&gt;</span> <span class="">{</span></div>
	            <div>&nbsp; &nbsp; <span class="text-pink-500">let</span> mul <span class="text-pink-500">=</span> Math<span class="">.</span><span class="text-blue-300">pow</span><span class="">(</span><span class="text-purple-500">10</span><span class="">,</span> i<span class="">)</span><span class="token punctuation">;</span> <span class="text-code3">// 1, 10, 100</span></div>
                <div><span class="">}</span><span class="">)</span><span class="">;</span></div></code>               
            </div>
        </div>   -->
        <!-- <div class="w-full bg-code2 absolute z-10 top-[49.7%] left-[-0.75rem] flex pl-[1.8rem]">
            <div class="list py-6 mr-2">
                <ol class="relative text-sm z-10 p-0 pr-2">
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                </ol>
            </div>
            <div class="py-6 side-scroll overflow-x-auto whitespace-nowrap">
                <code class="leading-[22px]">236 <br>
            <div>││└ mul = 1;   236/(mul*10) = 236/10   = 23.6; round(23.6) = 23;</div>
            <div>│└─ mul = 10;  236/(mul*10) = 236/100  = 2.36; round(2.36) = 2;</div>
            <div>└── mul = 100; 236/(mul*10) = 236/1000 = 0.23; round(0.23) = 0;</div></code>
               
            </div>
        </div>       -->
        <!-- <div class="w-full bg-code2 absolute z-10 top-[53.45%] left-[-0.75rem] flex pl-[1.8rem]">
            <div class="list noborder py-6 mr-2">
                <ol class="relative text-sm z-10 p-0 pr-2">
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                </ol>
            </div>
            <div class="py-6 side-scroll overflow-x-auto whitespace-nowrap">
                <code class="leading-[22px]">236 <br>
            <div>││└  23*1 = 23</div>
            <div>│└─  2*10 = 20</div>
            <div>└── 0*100 = 0</div></code>
            </div>
        </div>       -->
        <!-- <div class="w-full bg-code2 absolute z-10 top-[56%] left-[-0.75rem] flex pl-[1.8rem]">
            <div class="list noborder py-6 mr-2">
                <ol class="relative text-sm z-10 p-0 pr-2">
                    <li></li>
                    <li></li>
                </ol>
            </div>
            <div class="py-6 side-scroll overflow-x-auto whitespace-nowrap">
                <code class="leading-[22px]">
            <div><span class="text-pink-500">let</span> cycles <span class="text-pink-500">=</span> Math.<span class="text-blue-300">floor</span>(n <span class="text-pink-500">/</span> (mul <span class="text-pink-500">*</span> 10));
</div>
            <div><span class="text-pink-500">let</span> ones <span class="text-pink-500">=</span> cycles <span class="text-pink-500">*</span> mul;</div></code>
            </div>
        </div>       -->
    </div>
</body>
</html>